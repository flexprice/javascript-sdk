/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { remap as remap$ } from "../../lib/primitives.js";
import { WindowSize, WindowSize$outboundSchema } from "./windowsize.js";

export type DtoGetUsageByMeterRequest = {
  /**
   * BillingAnchor enables custom monthly billing periods for meter usage aggregation.
   *
   * @remarks
   *
   * Usage guidelines:
   * - Only effective when WindowSize = "MONTH"
   * - For other window sizes (DAY, HOUR, WEEK), this field is ignored
   * - When nil, uses standard calendar months (1st to 1st)
   * - When provided, creates custom monthly periods (e.g., 5th to 5th)
   *
   * Common use cases:
   * - Subscription billing periods that don't align with calendar months
   * - Customer-specific billing cycles (e.g., signed up on 15th)
   * - Multi-tenant systems with different billing anchor dates
   *
   * Example: If BillingAnchor = "2024-03-05T14:30:45Z" and WindowSize = "MONTH":
   *   - March period: 2024-03-05 14:30:45 to 2024-04-05 14:30:45
   *   - April period: 2024-04-05 14:30:45 to 2024-05-05 14:30:45
   */
  billingAnchor?: string | undefined;
  bucketSize?: WindowSize | undefined;
  customerId?: string | undefined;
  endTime?: string | undefined;
  externalCustomerId?: string | undefined;
  filters?: { [k: string]: Array<string> } | undefined;
  meterId: string;
  startTime?: string | undefined;
  windowSize?: WindowSize | undefined;
};

/** @internal */
export type DtoGetUsageByMeterRequest$Outbound = {
  billing_anchor?: string | undefined;
  bucket_size?: string | undefined;
  customer_id?: string | undefined;
  end_time?: string | undefined;
  external_customer_id?: string | undefined;
  filters?: { [k: string]: Array<string> } | undefined;
  meter_id: string;
  start_time?: string | undefined;
  window_size?: string | undefined;
};

/** @internal */
export const DtoGetUsageByMeterRequest$outboundSchema: z.ZodType<
  DtoGetUsageByMeterRequest$Outbound,
  z.ZodTypeDef,
  DtoGetUsageByMeterRequest
> = z.object({
  billingAnchor: z.string().optional(),
  bucketSize: WindowSize$outboundSchema.optional(),
  customerId: z.string().optional(),
  endTime: z.string().optional(),
  externalCustomerId: z.string().optional(),
  filters: z.record(z.array(z.string())).optional(),
  meterId: z.string(),
  startTime: z.string().optional(),
  windowSize: WindowSize$outboundSchema.optional(),
}).transform((v) => {
  return remap$(v, {
    billingAnchor: "billing_anchor",
    bucketSize: "bucket_size",
    customerId: "customer_id",
    endTime: "end_time",
    externalCustomerId: "external_customer_id",
    meterId: "meter_id",
    startTime: "start_time",
    windowSize: "window_size",
  });
});

export function dtoGetUsageByMeterRequestToJSON(
  dtoGetUsageByMeterRequest: DtoGetUsageByMeterRequest,
): string {
  return JSON.stringify(
    DtoGetUsageByMeterRequest$outboundSchema.parse(dtoGetUsageByMeterRequest),
  );
}
