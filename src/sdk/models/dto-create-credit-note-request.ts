/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { remap as remap$ } from "../../lib/primitives.js";
import {
  CreditNoteReason,
  CreditNoteReason$outboundSchema,
} from "./credit-note-reason.js";
import {
  DtoCreateCreditNoteLineItemRequest,
  DtoCreateCreditNoteLineItemRequest$Outbound,
  DtoCreateCreditNoteLineItemRequest$outboundSchema,
} from "./dto-create-credit-note-line-item-request.js";

export type DtoCreateCreditNoteRequest = {
  /**
   * credit_note_number is an optional human-readable identifier for the credit note
   */
  creditNoteNumber?: string | undefined;
  /**
   * idempotency_key is an optional key used to prevent duplicate credit note creation
   */
  idempotencyKey?: string | undefined;
  /**
   * invoice_id is the unique identifier of the invoice this credit note is applied to
   */
  invoiceId: string;
  /**
   * line_items contains the individual line items that make up this credit note (minimum 1 required)
   */
  lineItems?: Array<DtoCreateCreditNoteLineItemRequest> | undefined;
  /**
   * memo is an optional free-text field for additional notes about the credit note
   */
  memo?: string | undefined;
  metadata?: { [k: string]: string } | undefined;
  /**
   * process_credit_note is a flag to process the credit note after creation
   */
  processCreditNote?: boolean | undefined;
  reason: CreditNoteReason;
};

/** @internal */
export type DtoCreateCreditNoteRequest$Outbound = {
  credit_note_number?: string | undefined;
  idempotency_key?: string | undefined;
  invoice_id: string;
  line_items?: Array<DtoCreateCreditNoteLineItemRequest$Outbound> | undefined;
  memo?: string | undefined;
  metadata?: { [k: string]: string } | undefined;
  process_credit_note: boolean;
  reason: string;
};

/** @internal */
export const DtoCreateCreditNoteRequest$outboundSchema: z.ZodMiniType<
  DtoCreateCreditNoteRequest$Outbound,
  DtoCreateCreditNoteRequest
> = z.pipe(
  z.object({
    creditNoteNumber: z.optional(z.string()),
    idempotencyKey: z.optional(z.string()),
    invoiceId: z.string(),
    lineItems: z.optional(
      z.array(DtoCreateCreditNoteLineItemRequest$outboundSchema),
    ),
    memo: z.optional(z.string()),
    metadata: z.optional(z.record(z.string(), z.string())),
    processCreditNote: z._default(z.boolean(), true),
    reason: CreditNoteReason$outboundSchema,
  }),
  z.transform((v) => {
    return remap$(v, {
      creditNoteNumber: "credit_note_number",
      idempotencyKey: "idempotency_key",
      invoiceId: "invoice_id",
      lineItems: "line_items",
      processCreditNote: "process_credit_note",
    });
  }),
);

export function dtoCreateCreditNoteRequestToJSON(
  dtoCreateCreditNoteRequest: DtoCreateCreditNoteRequest,
): string {
  return JSON.stringify(
    DtoCreateCreditNoteRequest$outboundSchema.parse(dtoCreateCreditNoteRequest),
  );
}
